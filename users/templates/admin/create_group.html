{% extends "admin/dashboard.html" %}
{% load widget_tweaks %}
{% block content %}
<div class="max-w-1/2 mx-auto mt-10">
    <!-- Messages -->
    <ul>
        {% for message in messages %} 
            <li class="bg-green-500 text-white px-2 py-1 rounded mb-2">{{ message }}</li>
        {% endfor %}
    </ul>

    <!-- Card -->
    <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6">
        <!-- Header -->
        <h2 class="text-xl text-center font-semibold text-green-600 mb-4">
            Create Group
        </h2>

        <!-- Form -->
        <form method="POST" class="space-y-6">
            {% csrf_token %}

            <!-- Group Name -->
            <div class="flex flex-col space-y-1">
                <label class="text-sm font-medium text-gray-700">Group Name:</label>
                {{ form.name|add_class:"w-full border-2 border-indigo-600 rounded-lg p-2 focus:ring-2 focus:ring-indigo-100 focus:outline-none" }}
            </div>

            <!-- Permissions -->
            <div class="flex flex-col space-y-2">
                <label class="text-sm font-medium text-gray-700">Assign Permissions:</label>

                <!-- Select All -->
                <div class="mb-2 flex items-center">
                    <input type="checkbox" id="select-all" class="mr-2 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                    <label for="select-all" class="text-sm text-gray-600 cursor-pointer">Select All</label>
                </div>

                <!-- Permissions Checkboxes -->
                <div class="grid grid-cols-2 gap-2" id="permissions-checkboxes">
                    {{ form.permissions }}
                </div>
            </div>

            <!-- Button -->
            <div class="flex justify-end">
                <button type="submit"
                        class="inline-flex items-center gap-2 bg-indigo-600 hover:bg-green-700
                               text-white font-medium px-5 py-2.5 rounded-lg
                               transition duration-200 shadow-sm hover:shadow-md">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                         viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M5 13l4 4L19 7"/>
                    </svg>
                    Create Group
                </button>
            </div>
        </form>
    </div>
</div>

<!-- JS for Select All -->
<script>
    const selectAllCheckbox = document.getElementById('select-all');
    const permissionCheckboxes = document.querySelectorAll('#permissions-checkboxes input[type="checkbox"]');

    selectAllCheckbox.addEventListener('change', function() {
        permissionCheckboxes.forEach(cb => cb.checked = this.checked);
    });
</script>

{% endblock %}
